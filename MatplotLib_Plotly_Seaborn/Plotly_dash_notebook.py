# -*- coding: utf-8 -*-
"""3.2 Plotly Dash notebook.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1_i2b3SKbWiRxg6m9PlGaTLJIjZxaBj4u
"""

import pandas as pd
import plotly.express as px
import plotly.data as pld

"""[Plotly Express documentation](https://plotly.com/python-api-reference/plotly.express.html)

# Tips
"""

tips = pld.tips()
tips.head()

"""Looking at this data what questions can we ask to ourselves that this data can answer?

- what is the portion of female visitors to the portions of male visitors?
- what is the sum of total bill for each day
- what is the sum of total bill for each time
- what is the relation between total bill and tips
- what is the total bill per gender for each day
"""

px.pie(tips, names='sex', title='Female vs. Male visitors')

px.bar(tips, x='day', y='total_bill', title='Total bill per day')

px.bar(
    tips.groupby('day', as_index=False).sum(),
    x='day',
    y='total_bill',
    title='Total bill per day smoothed'
)

px.bar(
    tips.groupby('day', as_index=False).sum(), 
    x='day', 
    y=['total_bill', 'tip'],
    title='Total bill vs. Tip per day'
    )

px.scatter(tips, x='total_bill', y='tip', title='Total bill vs. Tip')

px.sunburst(tips, path=['day', 'sex'], values='total_bill', title='Gender Total bill per day')

fig = px.sunburst(tips, path=['time', 'sex'], values='tip', title='Gender Total tip per time of day')
fig.update_traces(textinfo="label+percent parent")
fig.show()

"""# Stocks"""

stocks = pld.stocks()
stocks.head()

"""Looking at this data what questions can we ask to ourselves that this data can answer?

- What is the proportion of stocks values per day for each company
- What is the stocks trend per company
"""

px.area(stocks, y=['GOOG', 'AAPL', 'AMZN'], x='date', title='Stocks proportion vs. Date')

stocks = stocks.melt(id_vars=['date'], var_name='company', value_name='stock')
stocks.head()

line_fig = px.line(
    stocks,
    x='date',
    y='stock',
    color='company',
    title='Stock value vs. date',
)
company_names = {
    'GOOG':'Google',
    'AAPL': 'Apple',
    'AMZN': 'Amazon',
    'FB': 'Facebook',
    'NFLX': 'Netflix',
    'MSFT': 'Microsoft'
}
line_fig.for_each_trace(
    lambda trace: trace.update(
        name = company_names[trace.name], 
        legendgroup = company_names[trace.name],
        hovertemplate = trace.hovertemplate.replace(trace.name, company_names[trace.name])
        )
    )
line_fig.show()

"""# Gapminder"""

gapminder = pld.gapminder()
gapminder.head()

"""Looking at this data what questions can we ask to ourselves that this data can answer?

- What is the GPD per Cap for each country in each year
- What is the relation between GDP and life expectancy
"""

gdpPercap_min = gapminder['gdpPercap'].min()
gdpPercap_max = gapminder['gdpPercap'].max()
px.choropleth(
    gapminder, 
    title='GDP per Country',
    locations='iso_alpha', 
    color='gdpPercap', 
    animation_frame='year', 
    range_color=[gdpPercap_min, gdpPercap_max]
)

lifeExp_min = gapminder['lifeExp'].min()
lifeExp_max = gapminder['lifeExp'].max()
px.scatter(
    gapminder,
    x='gdpPercap',
    y='lifeExp', 
    color='continent', 
    hover_name='country', 
    # size_max=60,
    log_x=True, 
    size='pop',
    # title='GDP vs life expectency',
    # # trendline='ols',
    symbol='continent',
    range_x=[gdpPercap_min, gdpPercap_max],
    range_y=[lifeExp_min, lifeExp_max],
    animation_frame='year',
)

"""# Dash
[Dash Documentation](https://dash.plotly.com/)

In web design world there is CSS framework that is the most used for design.

That framework is **bootstrap**, bootstrap divides the web page to 12 column that can be combined

![image.png](data:image/png;base64,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QIAAAQIECBAg0DcBmVvfIm68BAgQIECAAAECBAh0T0Dm1r2Y6TEBAgQIECBAgAABAn0TkLn1LeLGS4AAAQIECBAgQIBA9wRkbt2LmR4TIECAAAECBAgQINA3AZlb3yJuvAQIECBAgAABAgQIdE9A5ta9mOkxAQIECBAgQIAAAQJ9E5C59S3ixkuAAAECBAgQIECAQPcEZG7di5keEyBAgAABAgQIECDQNwGZW98ibrwECBAgQIAAAQIECHRPQObWvZjpMQECBAgQIECAAAECfROQufUt4sZLgAABAgQIECBAgED3BGRu3YuZHhMgQIAAAQIECBAg0DcBmVvfIm68BAgQIECAAAECBAh0T0Dm1r2Y6TEBAgQIECBAgAABAn0TkLn1LeLGS4AAAQIECBAgQIBA9wRkbt2LmR4TIECAAAECBAgQINA3AZlb3yJuvAQIECBAgAABAgQIdE9A5ta9mOkxAQIECBAgQIAAAQJ9E5C59S3ixkuAAAECBAgQIECAQPcEZG7di5keEyBAgAABAgQIECDQNwGZW98ibrwECBAgQIAAAQIECHRPQObWvZjpMQECBAgQIECAAAECfROQufUt4sZLgAABAgQIECBAgED3BGRu3YuZHhMgQIAAAQIECBAg0DcBmVvfIm68BAgQIECAAAECBAh0T0Dm1r2Y6TEBAgQIECBAgAABAn0TWBgMBn0bs/ESIECAAAECBAgQIECgWwLW3LoVL70lQIAAAQIECBAgQKCPAktp0N/89T/t4+iNmQCBlgnc8Us/Hj3yitSysOgOgZ4KeEXqaeANm0ArBeIVyZpbKyOjUwQIECBAgAABAgQIECgIyNwKGDYJECBAgAABAgQIECDQSgGZWyvDolMECBAgQIAAAQIECBAoCMjcChg2CRAgQIAAAQIECBAg0EoBmVsrw6JTBAgQIECAAAECBAgQKAjI3AoYNgkQIECAAAECBAgQINBKAZlbK8OiUwQIECBAgAABAgQIECgIyNwKGDYJECBAgAABAgQIECDQSgGZWyvDolMECBAgQIAAAQIECBAoCMjcChg2CRAgQIAAAQIECBAg0EoBmVsrw6JTBAgQIECAAAECBAgQKAjI3AoYNgkQIECAAAECBAgQINBKAZlbK8OiUwQIECBAgAABAgQIECgIyNwKGDYJECBAgAABAgQIECDQSgGZWyvDolME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)

**Dash** is a dhasboard framework to build dashboards using HTML and CSS
"""

!pip install -q dash dash_bootstrap_components jupyter_dash

from dash import Dash, dcc, html
import dash_bootstrap_components as dbc
from jupyter_dash import JupyterDash
from dash.dependencies import Input, Output, State

"""## Prepare Graph"""

tips = pld.tips()

sex_pie = px.pie(tips, names='sex', title='Female vs. Male visitors')

total_bill_per_day_bar = px.bar(
    tips.groupby('day', as_index=False).sum(),
    x='day',
    y='total_bill',
    title='Total bill per day smoothed'
)

total_bil_tip_bar = px.bar(
    tips.groupby('day', as_index=False).sum(), 
    x='day', 
    y=['total_bill', 'tip'],
    title='Total bill vs. Tip per day'
)

total_bill_tip_scatter = px.scatter(tips, x='total_bill', y='tip', title='Total bill vs. Tip')

day_sex_total_bill_sunburst = px.sunburst(tips, path=['day', 'sex'], values='total_bill', title='Gender Total bill per day')
day_sex_total_bill_sunburst = day_sex_total_bill_sunburst.update_traces(textinfo="label+percent parent")

time_sex_tip_sunburst = px.sunburst(tips, path=['time', 'sex'], values='tip', title='Gender Total tip per time of day')
time_sex_tip_sunburst = time_sex_tip_sunburst.update_traces(textinfo="label+percent parent")

sizes = tips['size'].unique()
sizes

"""## Build Components"""

sex_pie_fig = dcc.Graph(
    id='sex_pie_fig',
    figure=sex_pie
)
total_bill_per_day_bar_fig = dcc.Graph(
    id='total_bill_per_day_bar_fig',
    figure=total_bill_per_day_bar
)
total_bil_tip_bar_fig = dcc.Graph(
    id='total_bil_tip_bar_fig',
    figure=total_bil_tip_bar
)
total_bill_tip_scatter_fig = dcc.Graph(
    id='total_bill_tip_scatter_fig',
    figure=total_bill_tip_scatter
)
day_sex_total_bill_sunburst_fig = dcc.Graph(
    id='day_sex_total_bill_sunburst_fig',
    figure=day_sex_total_bill_sunburst
)
time_sex_tip_sunburst_fig = dcc.Graph(
    id='time_sex_tip_sunburst_fig',
    figure=time_sex_tip_sunburst
)

size_selector = dcc.Dropdown(
    id='size_selector',
    options=sizes,
    multi=True,
    value=[],
    placeholder='Filter by group size'
)

app = JupyterDash('Basic Dash Dashboard', 
                  external_stylesheets=[dbc.themes.BOOTSTRAP], 
                  title="Plotly Tips Dashboard"
)

app.layout = dbc.Container(
    [
     dbc.Row(
         [
          dbc.Col(html.H1('Tips Dashboard Analysis'))
         ]
     ),
     dbc.Row(
         [
          dbc.Row(
              [
               dbc.Col(size_selector)
              ],
              className='my-2'
          ),
          dbc.Row(
              [
               dbc.Col(dbc.Card(total_bill_tip_scatter_fig), md=8),
               dbc.Col(dbc.Card(sex_pie_fig), md=4),
              ]
          )
         ],
         className='my-3'
     ),
     dbc.Row(
         [
          dbc.Col(dbc.Card(time_sex_tip_sunburst_fig), md=4),
          dbc.Col(dbc.Card(total_bill_per_day_bar_fig), md=8),
         ]
     ),
     dbc.Row(
         [
          dbc.Col(dbc.Card(total_bil_tip_bar_fig), md=8),
          dbc.Col(dbc.Card(day_sex_total_bill_sunburst_fig), md=4),
         ],
         className='my-3'
     )
    ]
)
@app.callback(
    [
     Output('sex_pie_fig', 'figure'),
     Output('time_sex_tip_sunburst_fig', 'figure'),
     Output('day_sex_total_bill_sunburst_fig', 'figure'),
    ],
    Input('size_selector', 'value'),
)
def update_pies(selected_sizes):
    if selected_sizes == None or len(selected_sizes) == 0:
        return [sex_pie, time_sex_tip_sunburst, day_sex_total_bill_sunburst]
    

    filtered_tips = tips[tips['size'].isin(selected_sizes)]

    new_sex_pie = px.pie(filtered_tips, names='sex', title='Female vs. Male visitors')
    
    new_time_sex_tip_sunburst = px.sunburst(filtered_tips, path=['time', 'sex'], values='tip', title='Gender Total tip per time of day')
    new_time_sex_tip_sunburst = new_time_sex_tip_sunburst.update_traces(textinfo="label+percent parent")

    new_day_sex_total_bill_sunburst = px.sunburst(filtered_tips, path=['day', 'sex'], values='total_bill', title='Gender Total bill per day')
    new_day_sex_total_bill_sunburst = new_day_sex_total_bill_sunburst.update_traces(textinfo="label+percent parent")

    return [new_sex_pie, new_time_sex_tip_sunburst, new_day_sex_total_bill_sunburst]

app.run_server(debug=True)

